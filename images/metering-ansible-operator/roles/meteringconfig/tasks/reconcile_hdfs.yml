---

- name: Deploy hdfs resources
  include_tasks: deploy_resources.yml
  vars:
    values_***REMOVED***le: /tmp/metering-values.yaml
    resources:
      - template_***REMOVED***le: templates/hdfs/hdfs-con***REMOVED***gmap.yaml
        apis: [ {kind: con***REMOVED***gmap} ]
        prune_label_value: hdfs-con***REMOVED***gmap
        create: "{{ meteringcon***REMOVED***g_enable_hdfs }}"
      - template_***REMOVED***le: templates/hdfs/hdfs-serviceaccount.yaml
        apis: [ {kind: serviceaccount} ]
        prune_label_value: hdfs-service-account
        create: "{{ meteringcon***REMOVED***g_enable_hdfs }}"
      - template_***REMOVED***le: templates/hdfs/hdfs-datanode-statefulset.yaml
        apis: [ {kind: statefulset, api_version: 'apps/v1'} ]
        prune_label_value: hdfs-datanode-statefulset
        create: "{{ meteringcon***REMOVED***g_enable_hdfs }}"
      - template_***REMOVED***le: templates/hdfs/hdfs-namenode-statefulset.yaml
        apis: [ {kind: statefulset, api_version: 'apps/v1'} ]
        prune_label_value: hdfs-namenode-statefulset
        create: "{{ meteringcon***REMOVED***g_enable_hdfs }}"
