{{- $operatorValues :=  index .Values "reporting-operator" -}}
apiVersion: v1
kind: Con***REMOVED***gMap
metadata:
  name: reporting-operator-con***REMOVED***g
  labels:
    app: reporting-operator
data:
  log-level: {{ $operatorValues.spec.con***REMOVED***g.logLevel | quote}}
  log-reports: {{ $operatorValues.spec.con***REMOVED***g.logReports | quote}}
  log-ddl-queries: {{ $operatorValues.spec.con***REMOVED***g.logDDLQueries | quote}}
  log-dml-queries: {{ $operatorValues.spec.con***REMOVED***g.logDMLQueries | quote}}

{{- if $operatorValues.spec.con***REMOVED***g.hive.host }}
  hive-host: {{ $operatorValues.spec.con***REMOVED***g.hive.host | quote }}
{{- ***REMOVED*** }}
  hive-host: "hive-server:10000"
{{- end }}

{{- if $operatorValues.spec.con***REMOVED***g.hive.tls.enabled }}
  hive-ca-***REMOVED***le: "/var/run/secrets/hive-tls/ca.crt"
{{- if $operatorValues.spec.con***REMOVED***g.hive.auth.enabled }}
  hive-client-cert-***REMOVED***le: "/var/run/secrets/hive-auth/tls.crt"
  hive-client-key-***REMOVED***le: "/var/run/secrets/hive-auth/tls.key"
{{- end }}
{{- end }}

  presto-host: {{ $operatorValues.spec.con***REMOVED***g.presto.host | quote }}
{{- if $operatorValues.spec.con***REMOVED***g.presto.tls.enabled }}
  presto-ca-***REMOVED***le: "/var/run/secrets/presto-tls/ca.crt"
{{- if $operatorValues.spec.con***REMOVED***g.presto.auth.enabled }}
  presto-client-cert-***REMOVED***le: "/var/run/secrets/presto-auth/tls.crt"
  presto-client-key-***REMOVED***le: "/var/run/secrets/presto-auth/tls.key"
{{- end }}
{{- end }}

  prometheus-url: {{ $operatorValues.spec.con***REMOVED***g.prometheus.url | quote}}
  disable-prometheus-metrics-importer: {{ not $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.enabled | quote}}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.pollInterval }}
  prometheus-metrics-importer-poll-interval: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.pollInterval | quote}}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.chunkSize }}
  prometheus-metrics-importer-chunk-size: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.chunkSize | quote}}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.stepSize }}
  prometheus-metrics-importer-step-size: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.stepSize | quote}}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.leaderLeaseDuration }}
  leader-lease-duration: {{ $operatorValues.spec.con***REMOVED***g.leaderLeaseDuration | quote }}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prestoMaxQueryLength }}
  presto-max-query-length: {{ $operatorValues.spec.con***REMOVED***g.presto.maxQueryLength | quote }}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.maxQueryRangeDuration }}
  prometheus-datasource-max-query-range-duration: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.maxQueryRangeDuration | quote }}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.maxImportBack***REMOVED***llDuration }}
  prometheus-datasource-max-import-back***REMOVED***ll-duration: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.maxImportBack***REMOVED***llDuration | quote }}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.importFrom }}
  prometheus-datasource-import-from: {{ $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.con***REMOVED***g.importFrom | quote }}
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.prometheus.metricsImporter.auth.useServiceAccountToken }}
  prometheus-bearer-token-***REMOVED***le: "/var/run/secrets/kubernetes.io/serviceaccount/token"
{{- ***REMOVED*** }}
  prometheus-bearer-token-***REMOVED***le: "/var/run/reporting-operator/token"
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.allNamespaces }}
  all-namespaces: "true"
{{- end }}
{{- if $operatorValues.spec.con***REMOVED***g.targetNamespaces }}
  target-namespaces: {{ $operatorValues.spec.con***REMOVED***g.targetNamespaces | join "," | quote }}
{{- end }}
  enable-***REMOVED***nalizers: {{ $operatorValues.spec.con***REMOVED***g.enableFinalizers | quote}}
