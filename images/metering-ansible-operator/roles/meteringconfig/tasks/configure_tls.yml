---

- name: Con***REMOVED***gure TLS
  block:
  - name: Create temporary directory to store all the necessary certi***REMOVED***cates/keys
    temp***REMOVED***le:
      suf***REMOVED***x: certi***REMOVED***cates
      state: directory
    register: certi***REMOVED***cates_dir

  - name: Generate the metering root certi***REMOVED***cate authority
    include_tasks: con***REMOVED***gure_root_ca.yml

  - name: Con***REMOVED***gure TLS and client-side authentication in Presto
    include_tasks: con***REMOVED***gure_presto_tls.yml

  - name: Con***REMOVED***gure TLS and authentication in Hive
    include_tasks: con***REMOVED***gure_hive_tls.yml

  - name: Con***REMOVED***gure TLS and authentication in the reporting-operator
    include_tasks: con***REMOVED***gure_reporting_operator_tls.yml

  always:
  - name: Cleanup the temporary directory which held the certi***REMOVED***cates and keys
    ***REMOVED***le:
      path: "{{ certi***REMOVED***cates_dir.path }}"
      state: absent
