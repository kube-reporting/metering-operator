spec:
  awsBillingReportDataSource:
    enabled: false

  defaultReportDataSources:
    pod-request-cpu-cores:
      spec:
        prometheusMetricsImporter:
          query: |
            sum(kube_pod_container_resource_requests_cpu_cores) by (pod, namespace, node)
    pod-cpu-request-raw:
      spec:
        generationQueryView:
          queryName: "pod-cpu-request-raw"

    pod-limit-cpu-cores:
      spec:
        prometheusMetricsImporter:
          query: |
            sum(kube_pod_container_resource_limits_cpu_cores) by (pod, namespace, node)

    pod-usage-cpu-cores:
      spec:
        prometheusMetricsImporter:
          query: |
            label_replace(sum(rate(container_cpu_usage_seconds_total{container_name!="POD",container_name!="",pod_name!=""}[1m])) BY (pod_name, namespace), "pod", "$1", "pod_name", "(.*)") + on (pod, namespace) group_left(node) (sum(kube_pod_info{pod_ip!="",node!="",host_ip!=""}) by (pod, namespace, node) * 0)
    pod-cpu-usage-raw:
      spec:
        generationQueryView:
          queryName: "pod-cpu-usage-raw"

    pod-request-memory-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            sum(kube_pod_container_resource_requests_memory_bytes) by (pod, namespace, node)

    pod-memory-request-raw:
      spec:
        generationQueryView:
          queryName: "pod-memory-request-raw"

    pod-limit-memory-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            sum(kube_pod_container_resource_limits_memory_bytes) by (pod, namespace, node)

    pod-usage-memory-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            sum(label_replace(container_memory_usage_bytes{container_name!="POD", container_name!="",pod_name!=""}, "pod", "$1", "pod_name", "(.*)")) by (pod, namespace) + on (pod, namespace) group_left(node) (sum(kube_pod_info{pod_ip!="",node!="",host_ip!=""}) by (pod, namespace, node) * 0)

    pod-memory-usage-raw:
      spec:
        generationQueryView:
          queryName: "pod-memory-usage-raw"

    persistentvolumeclaim-request-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            max(kube_persistentvolumeclaim_resource_requests_storage_bytes) by (namespace, persistentvolumeclaim) + on (namespace, persistentvolumeclaim) group_left(storageclass, volumename) sum(kube_persistentvolumeclaim_info) by (namespace, persistentvolumeclaim, storageclass, volumename) * 0
    persistentvolumeclaim-request-raw:
      spec:
        generationQueryView:
          queryName: "persistentvolumeclaim-request-raw"

    pod-persistentvolumeclaim-request-info:
      spec:
        prometheusMetricsImporter:
          query: |
            kube_pod_spec_volumes_persistentvolumeclaims_info

    persistentvolumeclaim-capacity-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            kubelet_volume_stats_capacity_bytes
    persistentvolumeclaim-capacity-raw:
      spec:
        generationQueryView:
          queryName: "persistentvolumeclaim-capacity-raw"

    persistentvolumeclaim-usage-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            kubelet_volume_stats_used_bytes
    persistentvolumeclaim-usage-raw:
      spec:
        generationQueryView:
          queryName: "persistentvolumeclaim-usage-raw"

    persistentvolumeclaim-phase:
      spec:
        prometheusMetricsImporter:
          query: |
            kube_persistentvolumeclaim_status_phase
    persistentvolumeclaim-phase-raw:
      spec:
        generationQueryView:
          queryName: "persistentvolumeclaim-phase-raw"
    persistentvolumeclaim-usage-with-phase-raw:
      spec:
        generationQueryView:
          queryName: "persistentvolumeclaim-usage-with-phase-raw"


    node-allocatable-memory-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            kube_node_status_allocatable_memory_bytes * on(node) group_left(provider_id) max(kube_node_info) by (node, provider_id)
    node-memory-allocatable-raw:
      spec:
        generationQueryView:
          queryName: "node-memory-allocatable-raw"

    node-capacity-memory-bytes:
      spec:
        prometheusMetricsImporter:
          query: |
            kube_node_status_capacity_memory_bytes * on(node) group_left(provider_id) max(kube_node_info) by (node, provider_id)
    node-memory-capacity-raw:
      spec:
        generationQueryView:
          queryName: "node-memory-capacity-raw"

    node-allocatable-cpu-cores:
      spec:
        prometheusMetricsImporter:
          query: |
             kube_node_status_allocatable_cpu_cores * on(node) group_left(provider_id) max(kube_node_info) by (node, provider_id)
    node-cpu-allocatable-raw:
      spec:
        generationQueryView:
          queryName: "node-cpu-allocatable-raw"

    node-capacity-cpu-cores:
      spec:
        prometheusMetricsImporter:
          query: |
             kube_node_status_capacity_cpu_cores * on(node) group_left(provider_id) max(kube_node_info) by (node, provider_id)
    node-cpu-capacity-raw:
      spec:
        generationQueryView:
          queryName: "node-cpu-capacity-raw"

    cluster-cpu-usage-raw:
      spec:
        generationQueryView:
          queryName: "cluster-cpu-usage-raw"
    cluster-memory-usage-raw:
      spec:
        generationQueryView:
          queryName: "cluster-memory-usage-raw"

    cluster-cpu-capacity-raw:
      spec:
        generationQueryView:
          queryName: "cluster-cpu-capacity-raw"
    cluster-memory-capacity-raw:
      spec:
        generationQueryView:
          queryName: "cluster-memory-capacity-raw"
