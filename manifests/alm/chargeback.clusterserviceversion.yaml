#! validate-crd: clusterserviceversion.crd.yaml
#! parse-kind: ClusterServiceVersion
apiVersion: app.coreos.com/v1alpha1
kind: ClusterServiceVersion-v1
metadata:
  name: chargeback-alm-install.v0.4.4
spec:
  displayName: Chargeback-alm-install
  description: Chargeback can generate reports based on historical usage data from a cluster, providing accountability for how resources have been used.
  keywords: ['chargeback', 'metrics', 'reporting', 'coreos']
  version: 0.4.4
  maturity: alpha
  maintainers:
  - name: Chance Zibolski
    email: chance.zibolski@coreos.com
  - name: Derek Gonyeo
    email: derek.gonyeo@coreos.com
  provider:
    name: CoreOS, Inc
  labels:
    alm-status-descriptors: chargeback-alm-install.v0.4.4
    alm-owner-chargeback: chargeback-alm-install
  selector:
    matchLabels:
      alm-owner-chargeback: chargeback-alm-install
  install:
    strategy: deployment
    spec:
      permissions:
      - serviceAccountName: chargeback-alm-install
        rules:
        - apiGroups:
          - "*"
          resources:
          - "*"
          verbs:
          - "*"
      deployments:
      - replicas: 1
        template:
          metadata:
            labels:
              app: chargeback-alm-install
          spec:
            restartPolicy: Always
            serviceAccount: chargeback-alm-install
            imagePullSecrets:
            - name: coreos-pull-secret
            containers:
            - name: chargeback-alm-install
              image: quay.io/coreos/chargeback-alm-install:latest
              imagePullPolicy: Always
  customresourcede***REMOVED***nitions:
    owned:
    - name: reportprometheusqueries.chargeback.coreos.com
      version: v1beta1
      kind: ReportPrometheusQuery
      displayName: Chargeback prometheus query
      description: Represents a prometheus query used by chargeback
      statusDescriptors:
        - path: query
          displayName: Query
          description: Important prometheus metrics for the etcd cluster.
    - name: reportdatastores.chargeback.coreos.com
      version: v1beta1
      kind: ReportDataStore
      displayName: Chargeback data store
      description: Represents a location for chargeback to store data
      statusDescriptors:
        - path: promsum.query
          displayName: QueryName
          description: Name of the prometheus query to populate this data store with
        - path: promsum.storage.local
          displayName: LocalStorage
          description: Existence of this ***REMOVED***eld means to store data locally
        - path: promsum.storage.s3.bucket
          displayName: S3Bucket
          description: The S3 bucket to store data in
        - path: promsum.storage.s3.pre***REMOVED***x
          displayName: S3Pre***REMOVED***x
          description: The S3 pre***REMOVED***x to store data in
        - path: awsBilling.source.bucket
          displayName: S3Bucket
          description: The S3 bucket where AWS billing reports are stored
        - path: awsBilling.source.pre***REMOVED***x
          displayName: S3Pre***REMOVED***x
          description: The S3 pre***REMOVED***x under which AWS billing reports are stored
    - name: reportgenerationqueries.chargeback.coreos.com
      version: v1beta1
      kind: ReportGenerationQuery
      displayName: Chargeback report generation query
      description: A SQL query used by chargeback to generate reports
      statusDescriptors:
        - path: reportDataStores[*]
          displayName: ReportDataStores
          description: The names of data stores to use when generating this report
        - path: view.disabled
          displayName: ViewDisabled
          description: Controls whether this query generates a SQL view
        - path: columns[*].name
          displayName: ColumnName
          description: The name of a column in the report
        - path: columns[*].type
          displayName: ColumnType
          description: The type of a column in the report
        - path: query
          displayName: Query
          description: The SQL query used to generate a report
    - name: reports.chargeback.coreos.com
      version: v1beta1
      kind: Report
      displayName: A chargeback report
      description: A chargeback report
      statusDescriptors:
        - path: reportingStart
          displayName: ReportingStart
          description: The start of the window to report on
        - path: reportingEnd
          displayName: ReportingEnd
          description: The end of the window to report on
        - path: generationQuery
          displayName: GenerationQueryName
          description: The name of the generation query to use to generate this report
        - path: runImmediately
          displayName: RunImmediately
          description: Whether to run the report immediately or wait for reportingEnd+gracePeriod to pass
        - path: gracePeriod
          displayName: GracePeriod
          description: The amount of time to wait after reportingEnd to start generating the report
        - path: query
          displayName: Query
          description: The SQL query used to generate a report
        - path: output.local
          displayName: LocalStorage
          description: Existence of this ***REMOVED***eld means to store data locally
        - path: output.s3.bucket
          displayName: S3Bucket
          description: The S3 bucket to store data in
        - path: output.s3.pre***REMOVED***x
          displayName: S3Pre***REMOVED***x
          description: The S3 pre***REMOVED***x to store data in
